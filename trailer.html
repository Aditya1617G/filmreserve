<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>FilmReserve | Trailer</title>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <style>
    /* Basic Reset + Dark Theme */
    body { margin:0; background:#000; color:#fff; font-family:Arial,sans-serif; display:flex; flex-direction:column; min-height:100vh; }
    header, footer { background:#111; text-align:center; padding:12px; }
    header { font-size:24px; font-weight:bold; }
    main { flex:1; display:flex; justify-content:center; align-items:start; padding:20px; }

    /* Player Container */
    .player-wrapper {
      width:800px; max-width:95%;
      background:#000; padding:20px; border-radius:10px;
      box-shadow:0 0 20px #00aeff; margin-bottom:20px;
    }
    video { width:100%; max-height:450px; background:#000; cursor:pointer; border-radius:8px; }

    /* Controls */
    .controls { display:flex; align-items:center; gap:12px; margin-top:10px; flex-wrap:wrap; }
    button, select, input[type=range] { background:none; border:none; color:#fff; cursor:pointer; }
    #seek { flex:1; height:6px; accent-color:#00aeff; }

    /* Volume */
    .vol-container { position:relative; }
    #volume-slider { position:absolute; bottom:30px; left:-30px; transform:rotate(-90deg); width:120px; display:none; }
    .vol-container.clicked #volume-slider { display:block; }

    /* Menu */
    .menu { position:relative; }
    #menu-popup { position:absolute; bottom:35px; right:0; background:#222; padding:10px; border-radius:6px; display:none; box-shadow:0 0 10px #000; }
    .menu.open #menu-popup { display:flex; flex-direction:column; gap:8px; }

    /* Title & Description */
    .title-section { display:flex; align-items:center; justify-content:center; gap:10px; margin-top:15px; font-size:22px; }
    #toggle-desc { background:#222; padding:4px 8px; border-radius:4px; }
    #movie-description { display:none; margin-top:10px; color:#bbb; font-size:15px; text-align:center; }

    footer { font-size:14px; color:#aaa; }
  </style>
</head>

<body>
  <header>ðŸŽ¬ FilmReserve</header>

  <main>
    <div class="player-wrapper">
      <video id="trailer-video" preload="metadata"></video>

      <div class="controls">
        <div class="vol-container">
          <button id="mute-btn" title="Press M to mute/unmute">ðŸ”Š</button>
          <input type="range" id="volume-slider" min="0" max="2" step="0.05" value="1">
        </div>

        <span id="time">0:00 / 0:00</span>

        <input type="range" id="seek" value="0" step="0.01">

        <button id="zoom-btn" title="Press F to toggle fullscreen">â›¶</button>

        <div class="menu">
          <button id="menu-btn">â‹®</button>
          <div id="menu-popup">
            <label for="speed-select" style="color:#ccc;font-size:13px;">Playback Speed</label>
            <select id="speed-select">
              <option value="0.25">0.25Ã—</option>
              <option value="0.5">0.5Ã—</option>
              <option value="0.75">0.75Ã—</option>
              <option value="1" selected>1Ã—</option>
              <option value="1.25">1.25Ã—</option>
              <option value="1.5">1.5Ã—</option>
              <option value="1.75">1.75Ã—</option>
              <option value="2">2Ã—</option>
            </select>
            <button id="pip-btn">ðŸ“º Picture-in-Picture</button>
          </div>
        </div>
      </div>

      <div class="title-section">
        <h2 id="movie-title">Loading...</h2>
        <button id="toggle-desc">â–¼</button>
      </div>
      <p id="movie-description"></p>
    </div>
  </main>

  <footer>FilmReserve | Streaming entertainment anytime anywhere</footer>

  <script>
    // Video resources
    const trailers = {
      fantastic4: {
        url: 'https://res.cloudinary.com/da2rgo4zr/video/upload/v1752122783/videoplayback_2_tpuqob.mp4',
        title: 'Fantastic 4: First Steps',
        desc: 'Four astronauts gain cosmic abilities and must unite to face a new threat.'
      },
      jurassicworld: {
        url: 'https://res.cloudinary.com/da2rgo4zr/video/upload/v1752136552/y2mate.gg_-_Jurassic_World_Rebirth_Official_Trailer_360_bjil0w.mp4',
        title: 'Jurassic World Rebirth',
        desc: 'Dinosaurs return with vengeance in this thrilling reboot of Jurassic World.'
      },
      twenty8days: {
        url: 'https://res.cloudinary.com/da2rgo4zr/video/upload/v1752136552/videoplayback_3_d2szfo.mp4',
        title: '28 Days Later',
        desc: 'A deadly virus has devastated the world. Desperate survivors must fight to stay alive.'
      },
      f1trailer: {
        url: 'https://res.cloudinary.com/da2rgo4zr/video/upload/v1752136569/videoplayback_4_sp9lr3.mp4',
        title: 'F1: The Movie',
        desc: 'High-speed racing drama set in the world of Formula 1.'
      },
      avengers: {
        url: 'https://res.cloudinary.com/da2rgo4zr/video/upload/v1752122783/videoplayback_2_tpuqob.mp4', // replace if original
        title: 'Avengers: Doomsday',
        desc: 'The Avengers assemble once again to face an apocalyptic threat.'
      },
      superman: {
        url: 'https://res.cloudinary.com/da2rgo4zr/video/upload/v1752122503/videoplayback_1_wooh5o.mp4',
        title: 'Superman: Legacy',
        desc: 'The Man of Steel faces a new challenge as he embraces his destiny.'
      }
    };

    // Elements
    const video = document.getElementById('trailer-video');
    const muteBtn = document.getElementById('mute-btn');
    const volumeSlider = document.getElementById('volume-slider');
    const volumeContainer = document.querySelector('.vol-container');
    const timeDisplay = document.getElementById('time');
    const seek = document.getElementById('seek');
    const zoomBtn = document.getElementById('zoom-btn');
    const pipBtn = document.getElementById('pip-btn');
    const menuBtn = document.getElementById('menu-btn');
    const menuPopup = document.getElementById('menu-popup');
    const speedSelect = document.getElementById('speed-select');
    const titleEl = document.getElementById('movie-title');
    const descEl = document.getElementById('movie-description');
    const toggleDescBtn = document.getElementById('toggle-desc');

    // Load proper trailer
    const key = new URLSearchParams(location.search).get('movie') || 'fantastic4';
    const trailer = trailers[key];
    if (!trailer) {
      titleEl.textContent = 'Trailer Not Found';
      video.outerHTML = '<p style="color:red; text-align:center;">Trailer not found.</p>';
    } else {
      video.src = trailer.url;
      titleEl.textContent = trailer.title;
      descEl.textContent = trailer.desc;
    }

    // Playback and timeupdate
    video.addEventListener('timeupdate', () => {
      seek.value = video.currentTime;
      timeDisplay.textContent = formatTime(video.currentTime) + ' / ' + formatTime(video.duration);
    });
    video.addEventListener('loadedmetadata', () => { seek.max = video.duration; });

    // Seek
    seek.addEventListener('input', () => { video.currentTime = seek.value; });

    // Play/pause by clicking video or spacebar
    video.addEventListener('click', () => { video.paused ? video.play() : video.pause(); });
    document.addEventListener('keydown', e => {
      if (e.code === 'Space') { e.preventDefault(); video.paused ? video.play() : video.pause(); }
      if (e.key.toLowerCase() === 'm') muteBtn.click();
      if (e.key.toLowerCase() === 'f') zoomBtn.click();
    });

    // Mute/unmute
    muteBtn.addEventListener('click', () => {
      video.muted = !video.muted;
      muteBtn.textContent = video.muted ? 'ðŸ”‡' : 'ðŸ”Š';
    });

    // Volume slider toggle
    muteBtn.addEventListener('click', () => volumeContainer.classList.toggle('clicked'));
    volumeSlider.addEventListener('input', () => {
      video.volume = Math.min(volumeSlider.value, 1);
      video.muted = false;
      muteBtn.textContent = 'ðŸ”Š';
    });

    // Fullscreen
    zoomBtn.addEventListener('click', () => {
      if (!document.fullscreenElement) video.parentElement.requestFullscreen();
      else document.exitFullscreen();
    });

    // PiP
    pipBtn.addEventListener('click', async () => {
      if (document.pictureInPictureEnabled) {
        try { await video.requestPictureInPicture(); }
        catch { /* ignore */ }
      }
      closeMenu();
    });

    // Speed selector
    speedSelect.addEventListener('change', () => {
      video.playbackRate = parseFloat(speedSelect.value);
      closeMenu();
    });

    function closeMenu() { menuBtn.parentElement.classList.remove('open'); }

    // Menu open/close
    menuBtn.addEventListener('click', e => {
      e.stopPropagation();
      menuBtn.parentElement.classList.toggle('open');
    });
    document.addEventListener('click', e => {
      if (!menuBtn.contains(e.target)) closeMenu();
    });

    // Description toggle
    toggleDescBtn.addEventListener('click', () => {
      descEl.style.display = descEl.style.display === 'block' ? 'none' : 'block';
      toggleDescBtn.textContent = descEl.style.display === 'block' ? 'â–²' : 'â–¼';
    });

    // Formatting
    function formatTime(t) {
      if (!t || isNaN(t)) return '0:00';
      const m = Math.floor(t/60), s = Math.floor(t%60).toString().padStart(2, '0');
      return `${m}:${s}`;
    }
  </script>
</body>
</html>
