<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FilmReserve | Trailer</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    /* Inline styles kept for volume slider, replay button, etc. */
    .video-wrapper {
      position: relative;
      max-width: 960px;
      width: 100%;
      margin: auto;
    }
    video {
      width: 100%;
      border-radius: 12px;
      border: 2px solid rgba(0, 174, 255, 0.3);
      box-shadow: 0 0 12px rgba(0, 174, 255, 0.5);
      cursor: pointer;
    }
    .controls {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: rgba(0, 0, 0, 0.7);
      padding: 8px;
      border-radius: 0 0 12px 12px;
      position: absolute;
      bottom: 0;
      width: 100%;
      z-index: 5;
    }
    .controls button, .controls .zoom {
      background: transparent;
      border: none;
      color: #ccc;
      font-size: 18px;
      margin: 0 6px;
      cursor: pointer;
    }
    .seekbar {
      flex: 1;
      margin: 0 10px;
    }
    input[type="range"] {
      -webkit-appearance: none;
      width: 100%;
      height: 6px;
      background: linear-gradient(to right, #00baff 0%, #444 0%);
      border-radius: 3px;
      outline: none;
      cursor: pointer;
    }
    input[type="range"]::-webkit-slider-thumb {
      height: 14px;
      width: 14px;
      background: #00baff;
      border: 2px solid white;
      border-radius: 50%;
      cursor: pointer;
    }
    .volume-slider {
      position: absolute;
      left: 0;
      bottom: 40px;
      transform: rotate(-90deg);
      transform-origin: left bottom;
      display: none;
    }
    .replay-button {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 32px;
      color: #ccc;
      background: rgba(255,255,255,0.1);
      border: none;
      padding: 10px;
      border-radius: 50%;
      display: none;
      cursor: pointer;
    }
    .desc-btn {
      font-size: 12px;
      padding: 2px 6px;
      border: 1px solid #555;
      border-radius: 4px;
      color: #aaa;
      background: transparent;
      cursor: pointer;
    }
    .desc-btn:hover {
      background: #222;
      color: #fff;
    }
    .caption {
      text-align: center;
      font-size: 14px;
      color: #eee;
      margin-top: 6px;
    }
  </style>
</head>
<body style="background: black; color: white; font-family: Arial, sans-serif;">
  <div class="navbar" style="background: #111; opacity: 0.5; padding: 15px; text-align: center; font-size: 24px; font-weight: bold; position: fixed; top: 0; width: 100%; z-index: 999;">
    <a href="index.html" style="text-decoration: none; color: white;">ðŸŽ¬ FilmReserve</a>
  </div>

  <div class="trailer-container" style="margin-top: 80px; text-align: center;">
    <div class="video-wrapper">
      <video id="video" controls crossorigin="anonymous">
        <track id="captionTrack" label="English" kind="subtitles" srclang="en" default>
      </video>
      <button id="replayBtn" class="replay-button" onclick="replayVideo()">â­¯</button>
      <div class="controls">
        <button id="mute" title="M to mute/unmute">ðŸ”Š</button>
        <input id="volumeSlider" class="volume-slider" type="range" min="0" max="1" step="0.05" value="1">
        <div class="time" id="time" style="font-size: 12px; color: #aaa;">0:00 / 0:00</div>
        <input class="seekbar" type="range" id="seek" value="0" min="0" step="0.1">
        <button class="zoom" onclick="toggleFull()" title="F to fullscreen">â›¶</button>
      </div>
    </div>

    <h1 style="margin-top: 20px;">Trailer Preview <button id="descToggle" class="desc-btn">â–¼</button></h1>
    <div class="caption" id="descBox" style="display: none;">
      This is a description of the trailer. It will update per movie.
    </div>
  </div>

  <script>
    const video = document.getElementById('video');
    const seek = document.getElementById('seek');
    const time = document.getElementById('time');
    const mute = document.getElementById('mute');
    const volumeSlider = document.getElementById('volumeSlider');
    const descToggle = document.getElementById('descToggle');
    const descBox = document.getElementById('descBox');
    const replayBtn = document.getElementById('replayBtn');

    const trailers = {
      'fantastic4': {
        src: 'https://res.cloudinary.com/da2rgo4zr/video/upload/v1752118393/videoplayback_c38bfl.mp4',
        desc: `Few Astronauts go to space and return as Superheroes. What challenges will they face next?<br>
        ðŸŽ¥ Directed by: Matt Shackman | ðŸŽ¬ Genre: Action, Sci-Fi | ðŸ“… In Theatres 25 July 2025`
      },
      'superman': {
        src: 'https://res.cloudinary.com/da2rgo4zr/video/upload/v1752122503/videoplayback_1_wooh5o.mp4',
        desc: `Clark Kent returns. But something's different. <br>
        ðŸŽ¥ Directed by: James Gunn | Genre: Superhero, Sci-Fi | ðŸ“… 2025`
      },
      'jurassicworld': {
        src: 'https://res.cloudinary.com/da2rgo4zr/video/upload/v1752136552/y2mate.gg_-_Jurassic_World_Rebirth_Official_Trailer_360_bjil0w.mp4',
        desc: `Dinosaurs roam free again. Can humanity survive?<br>
        ðŸŽ¥ Directed by: Colin Trevorrow | Genre: Sci-Fi, Adventure`
      },
      '28yearslater': {
        src: 'https://res.cloudinary.com/da2rgo4zr/video/upload/v1752136552/videoplayback_3_d2szfo.mp4',
        desc: `What began as a virus is now a revolution.<br>
        ðŸŽ¥ Directed by: Danny Boyle | Genre: Horror, Thriller`
      },
      'f1movie': {
        src: 'https://res.cloudinary.com/da2rgo4zr/video/upload/v1752136569/videoplayback_4_sp9lr3.mp4',
        desc: `Speed. Glory. Sacrifice.<br> Brad Pitt races into danger and history.`
      },
      'avengers5': {
        src: 'https://res.cloudinary.com/da2rgo4zr/video/upload/v1752122783/videoplayback_2_tpuqob.mp4',
        desc: `Earthâ€™s Mightiest Heroes face extinction.<br>
        ðŸŽ¥ Directed by: Russo Brothers | Genre: Action, Sci-Fi`
      }
    };

    const params = new URLSearchParams(window.location.search);
    const movieKey = params.get('movie') || 'fantastic4';
    if (trailers[movieKey]) {
      const { src, desc } = trailers[movieKey];
      video.src = src;
      descBox.innerHTML = desc;
    }

    mute.onclick = () => {
      video.muted = !video.muted;
      mute.textContent = video.muted ? 'ðŸ”‡' : 'ðŸ”Š';
    };
    video.addEventListener('volumechange', () => {
      mute.textContent = video.muted ? 'ðŸ”‡' : 'ðŸ”Š';
    });

    video.addEventListener('timeupdate', () => {
      seek.value = video.currentTime;
      time.textContent = `${formatTime(video.currentTime)} / ${formatTime(video.duration)}`;
      seek.style.background = `linear-gradient(to right, #00baff ${(video.currentTime / video.duration) * 100}%, #444 ${(video.currentTime / video.duration) * 100}%)`;
    });

    seek.addEventListener('input', () => {
      video.currentTime = seek.value;
    });

    video.addEventListener('loadedmetadata', () => {
      seek.max = video.duration;
      time.textContent = `0:00 / ${formatTime(video.duration)}`;
    });

    video.addEventListener('ended', () => {
      replayBtn.style.display = 'block';
    });

    function replayVideo() {
      video.currentTime = 0;
      video.play();
      replayBtn.style.display = 'none';
    }

    document.querySelector('.video-wrapper').addEventListener('click', (e) => {
      const isControl = e.target.closest('.controls') || e.target.tagName === 'BUTTON' || e.target.tagName === 'INPUT';
      if (!isControl) togglePlay();
    });

    document.addEventListener('keydown', (e) => {
      if (e.target.tagName === 'INPUT') return;
      if (e.code === 'Space') {
        e.preventDefault();
        togglePlay();
      } else if (e.code === 'ArrowRight') {
        video.currentTime = Math.min(video.currentTime + 5, video.duration);
      } else if (e.code === 'ArrowLeft') {
        video.currentTime = Math.max(video.currentTime - 5, 0);
      } else if (e.key.toLowerCase() === 'm') {
        video.muted = !video.muted;
      } else if (e.key.toLowerCase() === 'f') {
        toggleFull();
      }
    });

    function togglePlay() {
      if (video.paused) {
        video.play();
        replayBtn.style.display = 'none';
      } else {
        video.pause();
      }
    }

    function toggleFull() {
      if (!document.fullscreenElement) {
        video.parentElement.requestFullscreen();
      } else {
        document.exitFullscreen();
      }
    }

    descToggle.onclick = () => {
      const isHidden = descBox.style.display === 'none';
      descBox.style.display = isHidden ? 'block' : 'none';
      descToggle.textContent = isHidden ? 'â–²' : 'â–¼';
    };

    mute.addEventListener('mouseenter', () => {
      volumeSlider.style.display = 'block';
    });
    mute.addEventListener('mouseleave', () => {
      setTimeout(() => volumeSlider.style.display = 'none', 500);
    });
    volumeSlider.addEventListener('input', () => {
      video.volume = volumeSlider.value;
      video.muted = false;
    });
  </script>
</body>
</html>
