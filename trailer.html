<!-- trailer.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Trailer | FilmReserve</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    body {
      margin: 0;
      background: #000;
      color: #fff;
      font-family: Arial, sans-serif;
    }
    .navbar {
      background-color: #111;
      opacity: 0.5;
      padding: 15px;
      text-align: center;
      font-size: 24px;
      font-weight: bold;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 999;
    }
    .navbar a {
      color: white;
      text-decoration: none;
    }
    .container {
      margin-top: 80px;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }
    .video-box {
      width: 90%;
      max-width: 960px;
      position: relative;
    }
    video {
      width: 100%;
      border-radius: 12px;
      border: 2px solid rgba(0, 174, 255, 0.3);
      box-shadow: 0 0 12px rgba(0, 174, 255, 0.5);
      cursor: pointer;
    }
    .controls {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: rgba(0,0,0,0.7);
      padding: 8px;
      border-radius: 0 0 12px 12px;
      position: absolute;
      bottom: 0;
      width: 100%;
    }
    .controls button {
      background: none;
      border: none;
      color: #ccc;
      font-size: 18px;
      cursor: pointer;
      position: relative;
    }
    .controls button:hover::after {
      content: attr(data-tooltip);
      position: absolute;
      bottom: 120%;
      background: #333;
      color: #fff;
      padding: 2px 8px;
      font-size: 12px;
      border-radius: 4px;
      white-space: nowrap;
    }
    .seekbar {
      flex: 1;
      margin: 0 10px;
    }
    input[type="range"] {
      width: 100%;
      accent-color: #00baff;
    }
    .time {
      font-size: 12px;
      color: #aaa;
    }
    .volume-slider {
      display: none;
      position: absolute;
      bottom: 35px;
      left: 0;
      transform: rotate(-90deg);
      transform-origin: left bottom;
    }
    .controls .volume:hover .volume-slider {
      display: block;
    }
    .replay-button {
      display: none;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 30px;
      background: rgba(255,255,255,0.1);
      border: none;
      border-radius: 50%;
      color: #ccc;
      padding: 10px 15px;
      cursor: pointer;
    }
    .dots-menu {
      display: none;
      position: absolute;
      right: 60px;
      bottom: 45px;
      background: #222;
      border: 1px solid #555;
      border-radius: 6px;
      z-index: 10;
    }
    .dots-menu button {
      display: block;
      background: none;
      color: #ccc;
      padding: 6px 12px;
      border: none;
      text-align: left;
      width: 100%;
      cursor: pointer;
    }
    .dots-menu button:hover {
      background: #444;
    }
    .caption-track {
      display: none;
    }
    h1 {
      margin-top: 16px;
      font-size: 22px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .desc-toggle {
      background: none;
      border: 1px solid #555;
      color: #aaa;
      font-size: 12px;
      padding: 2px 6px;
      border-radius: 4px;
      cursor: pointer;
    }
    .desc {
      margin-top: 10px;
      color: #ccc;
      font-size: 14px;
      text-align: center;
      display: none;
    }
    footer {
      background: #111;
      padding: 10px;
      text-align: center;
      color: #ccc;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <div class="navbar"><a href="index.html">ðŸŽ¬ FilmReserve</a></div>

  <div class="container">
    <div class="video-box">
      <video id="video" controls crossorigin="anonymous">
        <source id="videoSource" src="" type="video/mp4">
        <track id="captionTrack" kind="captions" srclang="en" label="English">
      </video>
      <button id="replayBtn" class="replay-button">â­¯</button>
      <div class="controls">
        <div class="volume" data-tooltip="M to mute/unmute">
          <button id="mute">ðŸ”Š</button>
          <input class="volume-slider" id="volumeSlider" type="range" min="0" max="1" step="0.05">
        </div>
        <div class="time" id="time">0:00 / 0:00</div>
        <input class="seekbar" type="range" id="seek" value="0" min="0" step="0.1">
        <button id="dots" onclick="toggleMenu()">â‹®</button>
        <div class="dots-menu" id="dotsMenu">
          <button onclick="setSpeed(0.5)">0.5x Speed</button>
          <button onclick="setSpeed(1)">1x Normal</button>
          <button onclick="setSpeed(1.5)">1.5x Speed</button>
          <button onclick="setSpeed(2)">2x Speed</button>
          <button onclick="toggleCaptions()">Toggle Captions</button>
        </div>
        <button id="fullscreen" data-tooltip="F for fullscreen">â›¶</button>
      </div>
    </div>

    <h1 id="movieTitle">Loading... <button class="desc-toggle" onclick="toggleDesc()" id="descToggle">â–¼</button></h1>
    <div class="desc" id="descBox"></div>
  </div>

  <footer>
    FilmReserve | Streaming entertainment anytime, anywhere.
  </footer>

  <script>
    const video = document.getElementById('video');
    const seek = document.getElementById('seek');
    const time = document.getElementById('time');
    const mute = document.getElementById('mute');
    const dotsMenu = document.getElementById('dotsMenu');
    const fullscreenBtn = document.getElementById('fullscreen');
    const replayBtn = document.getElementById('replayBtn');
    const volumeSlider = document.getElementById('volumeSlider');
    const captionTrack = document.getElementById('captionTrack');
    const descToggle = document.getElementById('descToggle');
    const descBox = document.getElementById('descBox');

    const trailers = {
      fantastic4: {
        title: "Fantastic 4: First Steps",
        src: "https://res.cloudinary.com/da2rgo4zr/video/upload/v1752118393/videoplayback_c38bfl.mp4",
        desc: "Few astronauts return as superheroes. Will they survive what's next?<br>ðŸŽ¥ Directed by: Matt Shackman | ðŸŽ¬ Genre: Action, Sci-Fi | ðŸ“… In Theatres 25 July 2025",
        captions: ""
      },
      superman: {
        title: "Superman: Legacy",
        src: "https://res.cloudinary.com/da2rgo4zr/video/upload/v1752122503/videoplayback_1_wooh5o.mp4",
        desc: "A new journey begins for the man of steel.<br>ðŸŽ¥ Directed by: James Gunn | ðŸŽ¬ Genre: Action, Drama | ðŸ“… In Theatres 2025"
      },
      jurassicworld: {
        title: "Jurassic World: Rebirth",
        src: "https://res.cloudinary.com/da2rgo4zr/video/upload/v1752136552/y2mate.gg_-_Jurassic_World_Rebirth_Official_Trailer_360_bjil0w.mp4",
        desc: "Dinosaurs are back and so is the chaos.<br>ðŸŽ¥ Directed by: Colin Trevorrow | ðŸŽ¬ Genre: Sci-Fi, Adventure | ðŸ“… In Theatres 2025"
      },
      f1movie: {
        title: "F1: The Movie",
        src: "https://res.cloudinary.com/da2rgo4zr/video/upload/v1752136569/videoplayback_4_sp9lr3.mp4",
        desc: "Racing into the cinematic world with Brad Pitt.<br>ðŸŽ¥ Directed by: Joseph Kosinski | ðŸŽ¬ Genre: Drama, Sport | ðŸ“… In Theatres 2025"
      },
      '28yearslater': {
        title: "28 Years Later",
        src: "https://res.cloudinary.com/da2rgo4zr/video/upload/v1752136552/videoplayback_3_d2szfo.mp4",
        desc: "The virus never left. Fear returns.<br>ðŸŽ¥ Directed by: Danny Boyle | ðŸŽ¬ Genre: Horror, Thriller | ðŸ“… In Theatres 2025"
      }
    };

    const query = new URLSearchParams(location.search);
    const movieKey = query.get('movie');
    const movie = trailers[movieKey];

    if (movie) {
      document.getElementById('videoSource').src = movie.src;
      video.load();
      document.getElementById('movieTitle').childNodes[0].textContent = movie.title + " ";
      descBox.innerHTML = movie.desc;
    }

    mute.onclick = () => {
      video.muted = !video.muted;
      mute.textContent = video.muted ? 'ðŸ”‡' : 'ðŸ”Š';
    };

    volumeSlider.addEventListener('input', () => {
      video.volume = volumeSlider.value;
      video.muted = volumeSlider.value == 0;
      mute.textContent = video.muted ? 'ðŸ”‡' : 'ðŸ”Š';
    });

    video.addEventListener('loadedmetadata', () => {
      seek.max = video.duration;
      time.textContent = `0:00 / ${formatTime(video.duration)}`;
    });

    video.addEventListener('timeupdate', () => {
      seek.value = video.currentTime;
      time.textContent = `${formatTime(video.currentTime)} / ${formatTime(video.duration)}`;
    });

    seek.addEventListener('input', () => {
      video.currentTime = seek.value;
    });

    video.addEventListener('ended', () => {
      replayBtn.style.display = 'block';
    });

    function replayVideo() {
      video.currentTime = 0;
      video.play();
      replayBtn.style.display = 'none';
    }

    function toggleMenu() {
      dotsMenu.style.display = dotsMenu.style.display === 'block' ? 'none' : 'block';
    }

    function toggleCaptions() {
      captionTrack.mode = captionTrack.mode === 'showing' ? 'disabled' : 'showing';
      dotsMenu.style.display = 'none';
    }

    function toggleFull() {
      if (!document.fullscreenElement) {
        video.parentElement.requestFullscreen();
      } else {
        document.exitFullscreen();
      }
    }

    function setSpeed(rate) {
      video.playbackRate = rate;
      dotsMenu.style.display = 'none';
    }

    function toggleDesc() {
      const shown = descBox.style.display === 'block';
      descBox.style.display = shown ? 'none' : 'block';
      descToggle.textContent = shown ? 'â–¼' : 'â–²';
    }

    document.addEventListener('keydown', (e) => {
      if (e.code === 'Space') {
        e.preventDefault();
        video.paused ? video.play() : video.pause();
      } else if (e.key.toLowerCase() === 'm') {
        mute.click();
      } else if (e.key.toLowerCase() === 'f') {
        toggleFull();
      } else if (e.key === 'ArrowRight') {
        video.currentTime += 5;
      } else if (e.key === 'ArrowLeft') {
        video.currentTime -= 5;
      }
    });

    document.addEventListener('click', e => {
      if (!e.target.closest('.dots-menu') && e.target.id !== 'dots') {
        dotsMenu.style.display = 'none';
      }
    });
  </script>
</body>
</html>
