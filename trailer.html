<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>FilmReserve | Trailer</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(to bottom, #0e0e0e, #1c1c1c);
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    header.navbar {
      width: 100%;
      padding: 1rem 2rem;
      background: #111;
      display: flex;
      align-items: center;
      font-size: 1.3rem;
      font-weight: bold;
      gap: 0.5rem;
    }

    header.navbar::before {
      content: "üé¨";
      font-size: 1.5rem;
    }

    .video-wrapper {
      margin-top: 30px;
      background: #111;
      border-radius: 12px;
      box-shadow: 0 0 15px #00ffff44;
      padding: 10px;
      width: 80%;
      max-width: 900px;
      position: relative;
    }

    video {
      width: 100%;
      height: auto;
      background: #000;
      border-radius: 8px;
    }

    .controls {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      padding: 8px;
    }

    .time, .volume-slider {
      color: #ccc;
      font-size: 14px;
    }

    .seekbar {
      flex: 1;
    }

    input[type="range"] {
      width: 100%;
      cursor: pointer;
    }

    .icon-btn {
      background: none;
      border: none;
      cursor: pointer;
      font-size: 1.2rem;
      color: #ccc;
    }

    .icon-btn:hover {
      color: #00f0ff;
    }

    .speed-menu, .volume-popup {
      position: absolute;
      background: #222;
      border: 1px solid #444;
      padding: 5px;
      border-radius: 6px;
      display: none;
      z-index: 10;
    }

    .speed-menu button, .volume-popup input {
      background: none;
      border: none;
      color: white;
      padding: 4px 10px;
      width: 100%;
      cursor: pointer;
    }

    .volume-popup {
      top: -80px;
      left: 20px;
    }

    .speed-menu {
      right: 5px;
      bottom: 40px;
      min-width: 100px;
    }

    .video-title {
      margin-top: 15px;
      font-size: 1.5rem;
      font-weight: bold;
      text-align: center;
    }

    .desc-btn {
      font-size: 0.85rem;
      margin-left: 0.5rem;
      padding: 4px 10px;
      background: #333;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    .desc-btn:hover {
      background: #444;
    }

    .description {
      margin-top: 10px;
      font-size: 0.9rem;
      text-align: center;
      color: #ccc;
      display: none;
    }

    footer {
      margin-top: 40px;
      color: #999;
      font-size: 0.85rem;
    }

    /* Show menus when active */
    .show { display: block; }
  </style>
</head>
<body>

  <header class="navbar">FilmReserve</header>

  <div class="video-wrapper">
    <video id="trailer" controls></video>

    <div class="controls">
      <button id="muteBtn" class="icon-btn">üîä</button>
      <span class="time" id="time">0:00 / 0:00</span>
      <input type="range" id="seekbar" class="seekbar" value="0">
      <button id="zoomBtn" class="icon-btn">üîç</button>
      <button id="pipBtn" class="icon-btn">üì∫</button>
      <button id="menuBtn" class="icon-btn">‚ãÆ</button>

      <!-- Volume slider on hover -->
      <div class="volume-popup" id="volumePopup">
        <input type="range" id="volumeSlider" min="0" max="1" step="0.01" value="1" orient="vertical" />
      </div>

      <!-- Playback Speed Menu -->
      <div class="speed-menu" id="speedMenu">
        <button data-speed="0.5">0.5x</button>
        <button data-speed="1">1x</button>
        <button data-speed="1.25">1.25x</button>
        <button data-speed="1.5">1.5x</button>
        <button data-speed="1.75">1.75x</button>
        <button data-speed="2">2x</button>
      </div>
    </div>
  </div>

  <div class="video-title" id="title">
    Loading... <button id="descBtn" class="desc-btn">‚ñ∂ Description</button>
  </div>
  <div class="description" id="desc">No description available.</div>

  <footer>
    FilmReserve | Streaming entertainment anytime, anywhere.
  </footer>

  <script>
    const video = document.getElementById("trailer");
    const title = document.getElementById("title");
    const desc = document.getElementById("desc");
    const time = document.getElementById("time");
    const seekbar = document.getElementById("seekbar");
    const muteBtn = document.getElementById("muteBtn");
    const volumePopup = document.getElementById("volumePopup");
    const volumeSlider = document.getElementById("volumeSlider");
    const zoomBtn = document.getElementById("zoomBtn");
    const pipBtn = document.getElementById("pipBtn");
    const menuBtn = document.getElementById("menuBtn");
    const speedMenu = document.getElementById("speedMenu");
    const descBtn = document.getElementById("descBtn");

    const movieData = {
      "fantastic4": {
        title: "Fantastic 4: First Steps",
        video: "trailers/fantastic4.mp4",
        description: "The Fantastic Four face their first mission, confronting an ancient power."
      },
      "avengers5": {
        title: "Avengers: Doomsday",
        video: "trailers/avengers5.mp4",
        description: "The Avengers face their ultimate threat in this dramatic final chapter."
      },
      "superman": {
        title: "Superman",
        video: "trailers/superman.mp4",
        description: "A new beginning for the Man of Steel with heart and power."
      },
      "f1movie": {
        title: "F1: The Movie",
        video: "trailers/F1.mp4",
        description: "Brad Pitt enters the high-octane world of Formula 1 racing."
      },
      "28yearslater": {
        title: "28 Years Later",
        video: "trailers/28yearslater.mp4",
        description: "A haunting continuation of the post-apocalyptic saga."
      },
      "jurassicworld": {
        title: "Jurassic World: Rebirth",
        video: "trailers/jurassicworld.mp4",
        description: "Dinosaurs return again‚Äîsmarter, faster, and deadlier."
      }
    };

    // Load movie
    const params = new URLSearchParams(window.location.search);
    const movie = params.get("movie");

    if (movieData[movie]) {
      const data = movieData[movie];
      video.src = data.video;
      title.innerHTML = `${data.title} <button id="descBtn" class="desc-btn">‚ñ∂ Description</button>`;
      desc.innerText = data.description;
    } else {
      video.poster = "images/notfound.png";
      title.textContent = "Movie not found";
    }

    // Update time
    video.addEventListener("timeupdate", () => {
      const current = Math.floor(video.currentTime);
      const duration = Math.floor(video.duration);
      time.textContent = `${formatTime(current)} / ${formatTime(duration)}`;
      seekbar.value = (video.currentTime / video.duration) * 100 || 0;
    });

    // Seek
    seekbar.addEventListener("input", () => {
      video.currentTime = (seekbar.value / 100) * video.duration;
    });

    function formatTime(sec) {
      return `${Math.floor(sec / 60)}:${("0" + Math.floor(sec % 60)).slice(-2)}`;
    }

    // Mute/Unmute
    muteBtn.addEventListener("click", () => {
      video.muted = !video.muted;
      muteBtn.textContent = video.muted ? "üîá" : "üîä";
    });

    // Volume slider
    muteBtn.addEventListener("mouseover", () => {
      volumePopup.classList.add("show");
    });

    volumeSlider.addEventListener("input", () => {
      video.volume = volumeSlider.value;
      video.muted = video.volume === 0;
      muteBtn.textContent = video.muted ? "üîá" : "üîä";
    });

    document.addEventListener("click", (e) => {
      if (!volumePopup.contains(e.target) && e.target !== muteBtn) {
        volumePopup.classList.remove("show");
      }
      if (!speedMenu.contains(e.target) && e.target !== menuBtn) {
        speedMenu.classList.remove("show");
      }
    });

    // Playback speed
    menuBtn.addEventListener("click", () => {
      speedMenu.classList.toggle("show");
    });

    speedMenu.querySelectorAll("button").forEach(btn => {
      btn.addEventListener("click", () => {
        video.playbackRate = parseFloat(btn.dataset.speed);
        speedMenu.classList.remove("show");
      });
    });

    // PiP
    pipBtn.addEventListener("click", () => {
      if (video !== document.pictureInPictureElement) {
        video.requestPictureInPicture();
      } else {
        document.exitPictureInPicture();
      }
    });

    // Description toggle
    document.body.addEventListener("click", (e) => {
      if (e.target.id === "descBtn") {
        desc.classList.toggle("show");
      }
    });

    // Keyboard shortcuts
    document.addEventListener("keydown", (e) => {
      if (e.code === "Space") {
        video.paused ? video.play() : video.pause();
        e.preventDefault();
      } else if (e.key === "f") {
        video.requestFullscreen();
      } else if (e.key === "m") {
        video.muted = !video.muted;
        muteBtn.textContent = video.muted ? "üîá" : "üîä";
      } else if (e.key === "ArrowRight") {
        video.currentTime += 5;
      } else if (e.key === "ArrowLeft") {
        video.currentTime -= 5;
      }
    });
  </script>
</body>
</html>
